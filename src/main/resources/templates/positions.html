<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Maze</title>
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body>
<h1>Maze</h1>

<div id="mazesContainer"></div>

<script>
    fetch('/api/positions')
        .then(response => response.json())
        .then(positions => {
            fetch('/api/paths')
                .then(response => response.json())
                .then(paths => {
                    const container = document.getElementById('mazesContainer');
                    if(paths ==0){
                        const header = document.createElement('h1');
                        header.innerHTML = "No paths found"
                        container.appendChild(header);
                    }
                    paths.forEach((path, index) => {
                        const table = document.createElement('table');
                        table.className = 'mazeTable';

                        const header = document.createElement('h2');
                        header.textContent = `Path ${index + 1}`;
                        container.appendChild(header);

                        path.forEach(row => {
                            const tr = document.createElement('tr');
                            row.forEach(cell => {
                                const td = document.createElement('td');
                                td.textContent = cell;
                                tr.appendChild(td);
                                if(td.textContent === "*"){
                                    td.style.color = "yellow";
                                    td.style.backgroundColor = "yellow";
                                }
                            });
                            table.appendChild(tr);
                        });
                        container.appendChild(table);
                    });
                })
                .catch(error => console.error('Error fetching paths:', error));
        })
        .catch(error => console.error('Error fetching positions:', error));
</script>
</body>
</html>
